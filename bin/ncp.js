var path = require('path');var net = require('net');var http = require('http');var dgram = require('dgram');var ws = require('../../ws');var fm = require('../../semantic.fm/bin/semantic.fm.js');var dm = require('../../semantic.dm/bin/semantic.dm.js');var act = require('../../semantic.node.actions/bin/semantic.node.actions.js');var ncp={net:{}};ncp.net.udp={};ncp.net.ws={};ncp.net.http={};ncp.act={};ncp.act.ws={};ncp.db={};ncp.net.udp.createSocket=function(){return dgram.createSocket("udp4")};ncp.net.udp.MulticastAgent=function(a,b,c,d){this.__host=a;this.__port=b;this.__message=c;this.__ttl=d;this.__startListening()};ncp.net.udp.MulticastAgent.prototype.__startListening=function(){var a=ncp.net.udp.createSocket(),b=this;a.on("listening",function(){a.setBroadcast(!0);a.setMulticastTTL(b.__ttl);a.addMembership(b.__host);b.__listen(a);b.__startMulticasting(a,b.__port,b.__host,b.__message,b.__ttl)})};
ncp.net.udp.MulticastAgent.prototype.__listen=function(a){a.on("message",function(a,c){console.log("[MulticastAgent] message received: %s (%s:%d)",a,c.address,c.port)})};ncp.net.udp.MulticastAgent.prototype.__startMulticasting=function(a,b,c,d,e){var f=new Buffer(d);setInterval(function(){a.send(f,0,f.length,b,c)},e)};ncp.net.udp.MulticastAgent.prototype.stopMulticasting=function(a){a.close()};ncp.net.udp.MulticastMessage={NEW_NODE:"new_node"};ncp.net.ws.Request=function(){};ncp.net.ws.IClient=function(){};ncp.net.ws.IClient.prototype.connect=function(a,b){};ncp.net.ws.IClient.prototype.send=function(a){};ncp.net.ws.Client=function(a,b){this.connect(a,b)};ncp.net.ws.Client.prototype.connect=function(a,b){var c=ws.connect("ws://"+a+":"+String(b));c.on("open",function(){console.log("[ncp.net.ws.Client] socket opened")});c.on("message",function(a){console.log("[ncp.net.ws.Client] message received: %s",a)})};ncp.net.ws.Client.prototype.send=function(a){};ncp.net.ws.IServer=function(){};ncp.net.ws.IServer.prototype.listen=function(a){};ncp.net.ws.Server=function(a){this.listen(a)};ncp.net.ws.Server.prototype.listen=function(a){function b(a){console.log("[ncp.net.ws.Server] message received: %s",a)}(new ws.Server({port:a})).on("connection",function(a){console.log("[ncp.net.ws.Server] connection created");a.on("message",b)})};ncp.act.ws.send=function(a,b,c){var d=c.get("client"),e=c.get("request");null!==d?null!==e?(d.send(e),a(c)):b("[ncp.act.ws.send] request is not defined"):b("[ncp.act.ws.send] client is not defined")};ncp.db.IClient=function(){};ncp.db.IClient.prototype.connect=function(a,b){};ncp.db.IClient.prototype.set=function(a,b){};ncp.db.IClient.prototype.get=function(a){};ncp.db.IClient.prototype.del=function(a){};ncp.db.IClient.prototype.add=function(a,b){};ncp.db.IClient.prototype.filter=function(a,b){};ncp.Agent=function(a,b,c){this.__udpAgent=a;this.__wsServer=b;this.__wsClient=c};module.exports = ncp;
